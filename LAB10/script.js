// –ú–∞—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤-—ñ–∫–æ–Ω–æ–∫, —è–∫—ñ –º–æ–∂—É—Ç—å –≤–∏–ø–∞–¥–∞—Ç–∏ —É —Å–ª–æ—Ç–∞—Ö.
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –µ–º–æ–¥–∑—ñ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç–∏, –∞–ª–µ —Ç—É—Ç –º–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ —à–ª—è—Ö–∏ –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å PNG.
let symbols = ["üçé", "üçê", "üçå", "üçë", "üçí", "üçã"];

// –õ—ñ—á–∏–ª—å–Ω–∏–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑—Ä–æ–±–ª–µ–Ω–∏—Ö —Å–ø—Ä–æ–±.
let tries = 0;

// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –≥—Ä–∏ ‚Äî 3, –∑–≥—ñ–¥–Ω–æ —É–º–æ–≤–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏.
const maxTries = 3;

// –û—Ç—Ä–∏–º—É—î–º–æ —ñ–º‚Äô—è –≥—Ä–∞–≤—Ü—è —á–µ—Ä–µ–∑ prompt. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–Ω—É–≤ ‚ÄúCancel‚Äù –∞–±–æ –≤–≤—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫ ‚Äî —Å—Ç–∞–≤–∏–º–æ "User".
let playerName = prompt("–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è:");
if (!playerName || playerName.trim() === "") playerName = "User";

// –í–∏–≤–æ–¥–∏–º–æ —ñ–º‚Äô—è –≥—Ä–∞–≤—Ü—è —É HTML-–µ–ª–µ–º–µ–Ω—Ç –∑ id="userNameDisplay".
document.getElementById("userNameDisplay").textContent = playerName;

// –í—ñ—à–∞—î–º–æ –ø–æ–¥—ñ—é ‚Äúclick‚Äù –Ω–∞ –∫–Ω–æ–ø–∫—É Generate. –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è spin().
document.getElementById("generateBtn").addEventListener("click", spin);


// --------------------------- –ì–û–õ–û–í–ù–ê –§–£–ù–ö–¶–Ü–Ø –ì–†–ò ---------------------------
function spin() {
    // –Ø–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –≤–∂–µ –¥–æ—Å—è–≥–ª–∞ maxTries ‚Äî –Ω—ñ—á–æ–≥–æ –±—ñ–ª—å—à–µ –Ω–µ —Ä–æ–±–∏–º–æ.
    if (tries >= maxTries) return;

    // –ó–±—ñ–ª—å—à—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –Ω–∞ 1.
    tries++;

    // –û–Ω–æ–≤–ª—é—î–º–æ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –ª—ñ—á–∏–ª—å–Ω–∏–∫ —É HTML.
    document.getElementById("triesInfo").textContent = `–°–ø—Ä–æ–±–∞ ${tries} –∑ ${maxTries}`;

    // –ì–µ–Ω–µ—Ä—É—î–º–æ 3 –∫–æ–ª–æ–Ω–∫–∏ —ñ–∑ 3 –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ (–∞–ª–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º–∏) —Å–∏–º–≤–æ–ª–∞–º–∏.
    let columns = generateColumns();

    // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ —ó—Ö —É —Å–ª–æ—Ç–∞—Ö.
    render(columns);

    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤–∏–ø–∞–≤ –≤–∏–≥—Ä–∞—à–Ω–∏–π —Ä—è–¥.
    let win = checkWin(columns);

    // –í–∏–≤–æ–¥–∏–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–≤–∏–≥—Ä–∞—à/–Ω–µ–≤–¥–∞—á–∞/–∫—ñ–Ω–µ—Ü—å).
    showResult(win);
}


// --------------------------- –ì–ï–ù–ï–†–ê–¶–Ü–Ø –ö–û–õ–û–ù–û–ö ---------------------------
function generateColumns() {
    // –ú–∞—Å–∏–≤, —è–∫–∏–π –±—É–¥–µ –º—ñ—Å—Ç–∏—Ç–∏ 3 –∫–æ–ª–æ–Ω–∫–∏.
    let cols = [];

    // –¶–∏–∫–ª –ø–æ 3 –∫–æ–ª–æ–Ω–∫–∞—Ö.
    for (let c = 0; c < 3; c++) {

        // –ö–æ–ø—ñ—é—î–º–æ –º–∞—Å–∏–≤ symbols, —â–æ–± —É–Ω–∏–∫–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä—ñ–≤ —É –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ.
        let available = [...symbols];

        // –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ –∑ 3 —Å–∏–º–≤–æ–ª—ñ–≤.
        let col = [];

        // –ó–∞–ø–æ–≤–Ω—é—î–º–æ 3 —Ä—è–¥–∫–∏ –∫–æ–ª–æ–Ω–∫–∏ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏.
        for (let r = 0; r < 3; r++) {

            // –í–∏–ø–∞–¥–∫–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å —É –º–∞—Å–∏–≤—ñ available.
            let index = Math.floor(Math.random() * available.length);

            // –î–æ–¥–∞—î–º–æ –≤–∏–±—Ä–∞–Ω–∏–π —Å–∏–º–≤–æ–ª –¥–æ –∫–æ–ª–æ–Ω–∫–∏.
            col.push(available[index]);

            // –í–∏–¥–∞–ª—è—î–º–æ —Ü–µ–π —Å–∏–º–≤–æ–ª, —â–æ–± –≤—ñ–Ω –Ω–µ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–≤—Å—è —É —Ü—ñ–π –∂–µ –∫–æ–ª–æ–Ω—Ü—ñ.
            available.splice(index, 1);
        }

        // –î–æ–¥–∞—î–º–æ –∫–æ–ª–æ–Ω–∫—É –¥–æ –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ –º–∞—Å–∏–≤—É.
        cols.push(col);
    }

    // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –º–∞—Å–∏–≤ –≤—Å—ñ—Ö 3 –∫–æ–ª–æ–Ω–æ–∫.
    return cols;
}


// --------------------------- –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –°–ò–ú–í–û–õ–Ü–í –£ –°–õ–û–¢–ê–• ---------------------------
function render(cols) {
    // –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –≤—Å—ñ 3 –∫–æ–ª–æ–Ω–∫–∏.
    for (let c = 0; c < 3; c++) {

        // –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑ 3 —Ä—è–¥–∫—ñ–≤.
        for (let r = 0; r < 3; r++) {

            // –ó–Ω–∞—Ö–æ–¥–∏–º–æ HTML-–µ–ª–µ–º–µ–Ω—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∑–∞ id —Ç–∏–ø—É c1r2 (–∫–æ–ª–æ–Ω–∫–∞/—Ä—è–¥–æ–∫)
            document.getElementById(`c${c}r${r}`).textContent = cols[c][r];
        }
    }
}


// --------------------------- –ü–ï–†–ï–í–Ü–†–ö–ê –ù–ê –í–ò–ì–†–ê–® ---------------------------
function checkWin(cols) {

    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫–æ–∂–µ–Ω —Ä—è–¥ –≤—ñ–¥ 0 –¥–æ 2.
    for (let r = 0; r < 3; r++) {

        // –Ø–∫—â–æ –≤—Å—ñ —Ç—Ä–∏ –∫–æ–ª–æ–Ω–∫–∏ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —Å–∏–º–≤–æ–ª —É —Ä—è–¥–∫—É r ‚Äî —Ü–µ –≤–∏–≥—Ä–∞—à.
        if (cols[0][r] === cols[1][r] && cols[1][r] === cols[2][r]) {

            // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–±‚Äô—î–∫—Ç —ñ–∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –≤–∏–≥—Ä–∞—à.
            return { win: true, row: r, symbol: cols[0][r] };
        }
    }

    // –Ø–∫—â–æ –∂–æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ –Ω–µ —Å–ø—ñ–≤–ø–∞–ª–æ ‚Äî –≤–∏–≥—Ä–∞—à—É –Ω–µ–º–∞—î.
    return { win: false };
}


// --------------------------- –í–ò–í–ï–î–ï–ù–ù–Ø –ü–û–í–Ü–î–û–ú–õ–ï–ù–ù–Ø ---------------------------
function showResult(res) {

    // –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ HTML-–µ–ª–µ–º–µ–Ω—Ç –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.
    const result = document.getElementById("result");

    // –Ø–∫—â–æ —î –≤–∏–≥—Ä–∞—à.
    if (res.win) {
        // –í–∏–≤–æ–¥–∏–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ–º–æ–≥—É.
        result.textContent = `üéâ –í—ñ—Ç–∞—é, ${playerName}! –í–∏–≥—Ä–∞—à —É —Ä—è–¥–∫—É ${res.row + 1}: ${res.symbol}`;

        // –ë–ª–æ–∫—É—î–º–æ –∫–Ω–æ–ø–∫—É, —â–æ–± –Ω–µ –º–æ–∂–Ω–∞ –±—É–ª–æ –∫—Ä—É—Ç–∏—Ç–∏ –¥–∞–ª—ñ.
        document.getElementById("generateBtn").disabled = true;
    }

    // –Ø–∫—â–æ —Å–ø—Ä–æ–±–∏ –∑–∞–∫—ñ–Ω—á–∏–ª–∏—Å—è ‚Äî –≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø—Ä–æ–≥—Ä–∞—à–µ–º.
    else if (tries >= maxTries) {
        result.textContent = "‚ùå –ì—Ä—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –í–∏–≥—Ä–∞—à–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤ –Ω–µ–º–∞—î.";

        // –ö–Ω–æ–ø–∫–∞ —Ç–∞–∫–æ–∂ –±–ª–æ–∫—É—î—Ç—å—Å—è.
        document.getElementById("generateBtn").disabled = true;
    }

    // –Ø–∫—â–æ –ø—Ä–æ—Å—Ç–æ —â–µ –æ–¥–Ω–∞ –Ω–µ–≤–¥–∞–ª–∞ —Å–ø—Ä–æ–±–∞ ‚Äî –¥–æ–∑–≤–æ–ª—è—î–º–æ –≥—Ä–∞—Ç–∏ –¥–∞–ª—ñ.
    else {
        result.textContent = "–ù–µ–º–∞—î –≤–∏–≥—Ä–∞—à—É. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ!";
    }
}
